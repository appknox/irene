.vuln-band
  .columns
    .column.contain-width.margin-t-q
      h6
        = vulnerabilityDetails.name

    .column.text-right
      if riskOverridden
        if saveVulnerabilityPreferences.isRunning
          .fa-font-size
            i.fa class="fa-spinner fa-spin"
          | &nbsp; #{t "pleaseWait"}
        else
          if isEditing
            select.select-box{action 'selectPreference' on='change'} id="marked-analysis-project"
              each risks as |risk|
                option selected={eq vulnerability.risk risk.value} value=risk.value
                  | #{t (risk-text risk.value)}
          else
            .severity-tags.margin-t-q class=vulnerability.riskLabelClass
              i.fa.risk-icons class=vulnerability.riskIconClass
              .uppercase-text
                | &nbsp; #{t (risk-text vulnerability.risk)}
            i.fa.fa-pencil.icon-effect.margin-l-q click="editPreference"
              = attach-tooltip placement="top"
                = t "editAnalysis"
            .fa.fa-undo.icon-effect.margin-l-q click="resetPreference"
              = attach-tooltip placement="top"
                = t "reset"

      else
        select.select-box{action 'selectPreference' on='change'} id="marked-analysis-project"
          option selected={eq vulnerability.risk null}
            = t "selectRisk"
          each risks as |risk|
            option value=risk.value
              | #{t (risk-text risk.value)}

  if isEditing
    .columns.padding-t-1
      .column
        .vertical-align-top
          .padding-t-h
            label.bold
              = t "comment"
          div.contain-width.margin-h-1
            = textarea class="form-control textarea-input margin-t-q" rows="2" placeholder=(t "reasonForOverride") value=vulnerability.comment
          button.is-primary.margin-t-q click="savePreference" disabled=saveVulnerabilityPreferences.isRunning
            if saveVulnerabilityPreferences.isRunning
              .fa-font-size
                i.fa class="fa-spinner fa-spin"
            | &nbsp; #{t "save"}
          button.is-default.margin-l-1.margin-t-q click="cancelEdit"
            | &nbsp; #{t "cancel"}

  else
    if riskOverridden
      .columns.padding-t-1.padding-b-h
        .column
          .vertical-align-stretch.risk-comment
            .risk-comment-label
              .margin-v-q
                = t "comment"
            div.contain-width.margin-h-h.margin-v-q
              if vulnerability.comment
                | #{vulnerability.comment}
              else
                em.text-lightgray
                  = t "none"
