<div class='vuln-band' data-test-vulnerability-details-container>
  <div class='columns'>
    <div class='column contain-width margin-t-q'>
      <h6 data-test-vulnerability-details-name>
        {{this.vulnerabilityDetails.name}}
      </h6>
    </div>
    <div class='column text-right'>
      {{#if this.riskOverridden}}
        {{#if this.isUpdatingPreference}}
          <div class='fa-font-size'>
            <i class='fa fa-spinner fa-spin'></i>
          </div>
          &nbsp;
          {{t 'pleaseWait'}}
        {{else if this.isEditing}}
          <select
            id='marked-analysis-project'
            class='select-box'
            {{on 'change' this.selectPreference}}
            data-test-risk-edit-select-preferences
          >
            {{#each this.risks as |risk|}}
              <option
                selected={{eq this.vulnerabilityRisk risk.value}}
                value={{risk.value}}
                data-test-risk-edit-select-preferences-option
              >
                {{t (risk-text risk.value)}}
              </option>
            {{/each}}
          </select>
        {{else}}
          <div
            class='severity-tags margin-t-q
              {{this.vulnerability.riskLabelClass}}'
            data-test-vulnerability-risk-label-class
          >
            <i class='fa risk-icons {{this.vulnerability.riskIconClass}}'></i>
            <div class='uppercase-text' data-test-vulnerability-risk-label-text>
              &nbsp;
              {{t (risk-text this.vulnerabilityRisk)}}
            </div>
          </div>
          <i
            class='fa fa-pencil icon-effect margin-l-q'
            role='button'
            {{on 'click' this.editPreference}}
            data-test-vulnerability-risk-edit
          >
            <AttachTooltip @placement='top'>
              <span data-test-vulnerability-edit-tooltip>
                {{t 'editAnalysis'}}
              </span>
            </AttachTooltip>
          </i>
          <div
            class='fa fa-undo icon-effect margin-l-q'
            role='button'
            {{on 'click' this.resetPreference}}
            data-test-risk-reset-btn
          >
            <AttachTooltip @placement='top'>
              <span data-test-vulnerability-reset-tooltip>
                {{t 'reset'}}
              </span>
            </AttachTooltip>
          </div>
        {{/if}}
      {{else}}
        <select
          id='marked-analysis-project'
          class='select-box'
          {{on 'change' this.selectPreference}}
          data-test-risk-select-preferences
        >
          <option
            selected={{eq this.vulnerabilityRisk null}}
            data-test-risk-select-preferences-option
          >
            {{t 'selectRisk'}}
          </option>
          {{#each this.risks as |risk|}}
            <option
              value={{risk.value}}
              data-test-risk-select-preferences-option
            >
              {{t (risk-text risk.value)}}
            </option>
          {{/each}}
        </select>
      {{/if}}
    </div>
  </div>

  {{#if this.isEditing}}
    <div class='columns padding-t-1' data-test-risk-edit-container>
      <div class='column'>
        <div class='vertical-align-top'>
          <div class='padding-t-h'>
            <label class='bold' data-test-risk-edit-comment-label>
              {{t 'comment'}}
            </label>
          </div>
          <div class='contain-width margin-h-1'>
            <Textarea
              aria-label='vulnerability comment'
              rows='2'
              placeholder={{t 'reasonForOverride'}}
              @value={{this.vulnerability.comment}}
              class='form-control textarea-input margin-t-q'
              data-test-risk-edit-comment-text-area
            />
          </div>
          <button
            disabled={{this.isUpdatingPreference}}
            class='button is-primary margin-t-q'
            type='button'
            {{on 'click' this.savePreference}}
            data-test-risk-edit-save-btn
          >
            {{#if this.isUpdatingPreference}}
              <div class='fa-font-size' data-test-risk-save-spinner>
                <i class='fa fa-spinner fa-spin'></i>
              </div>
            {{/if}}
            &nbsp;
            {{t 'save'}}
          </button>
          <button
            class='button is-default margin-l-1 margin-t-q'
            type='button'
            {{on 'click' this.cancelEdit}}
            data-test-risk-edit-cancel-btn
          >
            &nbsp;
            {{t 'cancel'}}
          </button>
        </div>
      </div>
    </div>
  {{else if this.riskOverridden}}
    <div
      class='columns padding-t-1 padding-b-h'
      data-test-risk-overridden-comment
    >
      <div class='column'>
        <div class='vertical-align-stretch risk-comment'>
          <div class='risk-comment-label'>
            <div class='margin-v-q' data-test-risk-overridden-comment-label>
              {{t 'comment'}}
            </div>
          </div>
          <div
            class='contain-width margin-h-h margin-v-q'
            data-test-risk-overridden-comment-text
          >
            {{#if this.vulnerability.comment}}
              {{this.vulnerability.comment}}
            {{else}}
              <em
                class='text-lightgray'
                data-test-risk-overridden-comment-no-text
              >
                {{t 'none'}}
              </em>
            {{/if}}
          </div>
        </div>
      </div>
    </div>
  {{/if}}
</div>