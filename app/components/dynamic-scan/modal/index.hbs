<AkDrawer
  @anchor='right'
  @open={{true}}
  @disableBackdropClick={{true}}
  data-test-cy='dynamicScanModal'
  @onClose={{@onClose}}
  as |dr|
>
  <AkStack @direction='column' @width='full' local-class='dynamic-scan-modal'>
    <AkAppbar
      @position='sticky'
      @justifyContent='space-between'
      class='px-3'
      as |ab|
    >
      <AkTypography
        @color='inherit'
        @variant='h5'
        @fontWeight='medium'
        data-test-dynamicScanModal-drawerContainer-title
      >
        {{t
          (if @isAutomatedScan 'dastTabs.automatedDAST' 'dastTabs.manualDAST')
        }}
      </AkTypography>

      <AkIconButton
        disabled={{this.disableCloseDastModal}}
        {{on 'click' dr.closeHandler}}
        class={{ab.classes.defaultIconBtn}}
        data-test-dynamicScanModal-drawerContainer-closeBtn
      >
        <AkIcon @iconName='close' />
      </AkIconButton>
    </AkAppbar>

    <AkStack
      @direction='column'
      @width='full'
      local-class='dynamic-scan-modal-body'
      class='p-3'
    >
      {{#if @isAutomatedScan}}
        <DynamicScan::Modal::AutomatedDastDevicePref
          @dpContext={{@dpContext}}
          @file={{@file}}
          @enableApiScan={{this.enableApiScan}}
        />
      {{else}}
        <DynamicScan::Modal::ManualDastDevicePref
          @dpContext={{@dpContext}}
          @file={{@file}}
          @isApiScanEnabled={{this.isApiScanEnabled}}
          @enableApiScan={{this.enableApiScan}}
        />
      {{/if}}
    </AkStack>

    <AkStack
      @width='full'
      @justifyContent='flex-start'
      @spacing='1.5'
      class='px-3 py-2'
      local-class='dynamic-scan-modal-cta'
    >
      <AkButton
        {{on 'click' this.runDynamicScan}}
        @loading={{this.startDynamicScan.isRunning}}
        @disabled={{not this.enableStartDynamicScanBtn}}
        data-test-dynamicScanModal-startBtn
      >
        {{t 'start'}}
      </AkButton>

      <AkButton
        @variant='outlined'
        @color='neutral'
        {{on 'click' @onClose}}
        @disabled={{this.startDynamicScan.isRunning}}
        data-test-dynamicScanModal-cancelBtn
      >
        {{t 'cancel'}}
      </AkButton>
    </AkStack>
  </AkStack>
</AkDrawer>