{{#unless this.isHideSettings}}
  <AkTypography @variant='h5' class='pb-2' data-test-fileCleanup-title>
    {{t 'storageManagement'}}
  </AkTypography>

  <AkStack @direction='row' @spacing='2'>
    <AkToggle
      @id='auto-cleanup'
      @onChange={{fn this.onChangePref this.changeset 'checkbox'}}
      @checked={{this.changeset.isEnabled}}
      data-test-fileCleanup-toggle
    />

    <AkStack @direction='column'>
      <AkTypography @variant='h5' data-test-fileCleanup-autoCleanupTitle>
        {{t 'fileCleanup.autoCleanup'}}
      </AkTypography>

      <AkTypography @variant='body2' data-test-fileCleanup-description>
        {{t 'fileCleanup.description'}}
      </AkTypography>

      {{#if this.changeset.isEnabled}}
        <AkStack @spacing='2' @width='8/12' class='my-2'>
          <AkTextField
            @label={{t 'fileCleanup.activeCount'}}
            @value={{this.changeset.filesToKeep}}
            @type='number'
            min={{2}}
            max={{50}}
            @id='active-file-limit'
            @disabled={{unless this.changeset.isEnabled true}}
            @error={{if this.changeset.error.filesToKeep true false}}
            data-test-fileCleanup-filesToKeepInput
          >
            <:helperText>
              <AkTypography
                @variant='body2'
                @color='error'
                data-test-fileCleanup-filesToKeepError
              >
                {{this.changeset.error.filesToKeep.validation}}
              </AkTypography>
            </:helperText>
          </AkTextField>

          <AkIconButton
            local-class='save-input'
            @variant='outlined'
            disabled={{if this.changeset.error.filesToKeep true}}
            {{on 'click' (fn this.onChangePref this.changeset 'submit')}}
            data-test-fileCleanup-saveBtn
          >
            <AkIcon @iconName='done' />
          </AkIconButton>
        </AkStack>

        <AkStack @direction='row' @alignItems='center' @spacing='2'>
          <AkTypography
            @variant='body2'
            data-test-fileCleanup-lastActivityLabel
          >
            {{t 'fileCleanup.lastActivity'}}:
          </AkTypography>

          <AkTypography @variant='body2' data-test-fileCleanup-lastActivityDate>
            {{day-js date=this.changeset.lastCleanedAt format='DD MMM YYYY'}}
          </AkTypography>

          <AkButton
            @variant='outlined'
            {{on 'click' this.onViewAllCleanup}}
            data-test-fileCleanup-viewListBtn
          >
            {{t 'fileCleanup.viewList'}}
          </AkButton>

          <AkButton
            @disabled={{unless this.changeset.isEnabled true}}
            {{on 'click' this.onTriggerCleanup}}
            data-test-fileCleanup-runBtn
          >
            {{t 'fileCleanup.run'}}
          </AkButton>
        </AkStack>
      {{/if}}
    </AkStack>
  </AkStack>

  {{! Added divider since it's render by self context check }}
  <AkDivider class='my-2' data-test-fileCleanup-divider />
{{/unless}}

{{#if this.isShowAllCleanup}}
  <AkModal
    @onClose={{this.onCloseModal}}
    @showHeader={{true}}
    @headerTitle={{t 'fileCleanup.listTitle'}}
    data-test-fileCleanup-modal
  >
    <Modals::OrgFileCleanupList />
  </AkModal>
{{/if}}