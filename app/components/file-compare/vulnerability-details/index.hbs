<FileCompare::Header
  @file1={{@file1}}
  @file2={{@file2}}
  @expandFilesOverview={{this.expandFilesOverview}}
>
  <:breadcrumbs>
    <AkBreadcrumbs::AutoTrail
      data-test-fileCompare-compareFiles-breadcrumbContainer
    />
  </:breadcrumbs>

  <:file1Content>
    {{#if this.file1}}
      <AkTypography
        @fontWeight='bold'
        @variant='body2'
        @color='secondary'
        data-test-fileCompare-vulnerabilityDetails-file1ID
      >
        {{this.file1.id}}
      </AkTypography>
    {{else}}
      -
    {{/if}}
  </:file1Content>

  <:file2Content>
    {{#if this.file2}}
      <AkTypography
        @fontWeight='bold'
        @variant='body2'
        @color='secondary'
        data-test-fileCompare-vulnerabilityDetails-file2ID
      >
        {{this.file2.id}}
      </AkTypography>
    {{else}}
      -
    {{/if}}
  </:file2Content>

  <:headerCTA>
    <AkIconButton
      disabled={{@isInvalidCompare}}
      {{on 'click' this.handleExpandFilesOverview}}
      data-test-fileCompare-expandFilesOverview-btn
    >
      <AkIcon
        @iconName='{{if
          this.expandFilesOverview
          "arrow-drop-up"
          "arrow-drop-down"
        }}'
        @size='medium'
        @color='secondary'
      />
    </AkIconButton>
  </:headerCTA>
</FileCompare::Header>

{{#if @isInvalidCompare}}
  <FileCompare::InvalidCompare @isSameFile={{this.isSameFile}} />

{{else}}
  <AkStack
    @direction='column'
    {{style paddingTop='0.7143em'}}
    data-test-fileCompare-vulnerabilityDetails-root
  >
    <AkStack
      @width='full'
      local-class='file-compare-vulnerability-details-header-wrapper'
      {{style marginTop='1.4286em'}}
      data-test-fileCompare-vulnerabilityDetails-header
    >
      <AkStack
        @direction='column'
        @width='full'
        local-class='file-compare-vulnerability-details-header'
      >
        <AkTypography @color='textSecondary' @gutterBottom={{true}}>
          {{t 'testCase'}}
        </AkTypography>

        <AkTypography @variant='h5'>
          {{@vulnerability.name}}
        </AkTypography>
      </AkStack>
    </AkStack>

    <AkStack
      @width='full'
      local-class='file-compare-vulnerability-details-content'
      data-test-fileCompare-vulnerabilityDetails-content
    >
      {{#if this.fetchFileAnalyses.isRunning}}
        {{#each (array 1 2)}}
          <AkStack
            @width='6/12'
            @direction='column'
            @alignItems='center'
            local-class='file-compare-vulnerability-details-skeleton-container'
          >
            {{#each (array 1 2 3 4) as |item|}}
              {{#unless (eq item 1)}}
                <AkDivider @color='dark' />
              {{/unless}}

              <AkStack
                @width='full'
                @alignItems='center'
                class='p-3'
                {{style gap='100px'}}
              >
                <AkSkeleton
                  @width='84px'
                  @height='19px'
                  @variant='rectangular'
                />
                <AkSkeleton
                  @width='90px'
                  @height='28px'
                  @variant='rectangular'
                />
              </AkStack>
            {{/each}}
          </AkStack>
        {{/each}}
      {{else}}
        {{#each this.fileAnalyses as |analysis|}}
          {{#if analysis}}
            <FileCompare::AnalysisDetails
              @analysis={{analysis}}
              @analysisStatus={{this.analysisStatus}}
              data-test-vulnerabilityDetails-fileAnalysisDetails='{{analysis.id}}'
            />
          {{else}}
            <AkStack
              @width='6/12'
              @direction='column'
              @alignItems='center'
              @spacing='3'
              local-class='file-compare-vulnerability-details-empty-data'
              data-test-vulnerabilityDetails-fileAnalysisDetails-notFound
            >
              <AkSvg::NoDataFound />

              <AkStack
                @direction='column'
                @alignItems='center'
                {{style gap='0.7143em'}}
              >
                <AkTypography @variant='h6' @align='center'>
                  {{t 'fileCompare.noDataAvailable'}}
                </AkTypography>

                <AkTypography @align='center'>
                  {{t 'fileCompare.nonExistentTestCase'}}
                </AkTypography>
              </AkStack>
            </AkStack>
          {{/if}}
        {{/each}}
      {{/if}}
    </AkStack>
  </AkStack>
{{/if}}